---
# Name. (required)
name: ${NAME}

# Architecture. (required)
arch: ${PKG_ARCH}

# Platform.
platform: linux

# Version. (required)
version: ${PKG_VERSION}

# Section.
section: custom

# Priority.
priority: optional

# Maintainer.
maintainer: ${PKG_HOMEPAGE}

# Description.
# Defaults to `no description given`.
description: "${PKG_DESCRIPTION}"

# Vendor.
vendor: ${PKG_HOMEPAGE}

# Package's homepage.
homepage: ${PKG_HOMEPAGE}

# License.
license: GPL-3.0

# Changelog YAML file, see: https://github.com/goreleaser/chglog
changelog: "${WORKDIR}/dist/changelog.yml"

# Disables globbing for files, config_files, etc.
disable_globbing: true

# Dependencies. (overridable)
depends:
  - "nordvpn (>= 4.0.0)"

# Basic file that applies to all packagers
contents:
  # copy application bundle
  - src: ${APP_BUNDLE_DIR}${INSTALL_DIR}
    dst: ${INSTALL_DIR}

  # desktop file
  - src: ${APP_BUNDLE_DIR}/${NAME}.desktop
    dst: /usr/share/applications/${NAME}.desktop
    file_info:
      mode: 0644

  # app icon
  - src: ${WORKDIR}/gui/linux/assets/${NAME}.svg
    dst: /usr/share/icons/hicolor/scalable/apps/${NAME}.svg
    file_info:
      mode: 0644

# All fields above marked as `overridable` can be overridden for a given package format in this section.
overrides:
  deb:
    depends:
      - "nordvpn (>= 4.0.0)"
    # Deb specific scripts.
    scripts:
      postinstall: ${APP_BUNDLE_DIR}/scriptlets/deb/postinst
      postremove: ${APP_BUNDLE_DIR}/scriptlets/deb/postrm
  rpm:
    depends:
      - "nordvpn >= 4.0.0"
    # RPM specific scripts.
    scripts:
      postinstall: ${APP_BUNDLE_DIR}/scriptlets/rpm/post
      postremove: ${APP_BUNDLE_DIR}/scriptlets/rpm/postun
